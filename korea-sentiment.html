<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>국내 금융시장 심리 - 오늘 저녁 뭐 먹지?</title> <!-- Keep original title -->
<meta name="description" content="한국 주식시장의 공포 탐욕 지수를 확인하고 투자에 참고하세요."/> <!-- Keep original description -->
<link rel="canonical" href="https://anse-sample1.pages.dev/korea-sentiment.html"/> <!-- Keep original canonical -->

<meta property="og:title" content="국내 금융시장 심리 - 오늘 저녁 뭐 먹지?"/> <!-- Keep original og tags -->
<meta property="og:description" content="한국 주식시장의 공포 탐욕 지수를 확인하고 투자에 참고하세요."/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://anse-sample1.pages.dev/korea-sentiment.html"/>
<meta property="og:image" content="https://anse-sample1.pages.dev/images/neutral.png"/>

<meta name="twitter:card" content="summary"/> <!-- Keep original twitter tags -->
<meta name="twitter:title" content="국내 금융시장 심리 - 오늘 저녁 뭐 먹지?"/>
<meta name="twitter:description" content="한국 주식시장의 공포 탐욕 지수를 확인하고 투자에 참고하세요."/>
<meta name="twitter:image" content="https://anse-sample1.pages.dev/images/neutral.png"/>

<!-- Existing styles and icons -->
<link rel="stylesheet" href="style.css"/> <!-- Keep this for now, will remove later if Tailwind replaces all -->
<link rel="icon" type="image/x-icon" href="fa.ico"/>

<!-- Tailwind CSS and Fonts from code.html -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3d84f5",
                        "background-light": "#f5f7f8",
                        "background-dark": "#101722",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
<style>
        body { font-family: 'Inter', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .gauge-gradient {
            background: conic-gradient(from 180deg at 50% 100%, #f87171 0deg, #fbbf24 90deg, #3d84f5 180deg);
        }
    </style>

<!-- Existing Google Analytics and Clarity scripts -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C8QR98TVTB"></script>
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-C8QR98TVTB');
    </script>

<script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "v2qmp0i82b");
    </script>

<!-- Existing ld+json -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "국내 금융시장 심리 알아보기",
      "url": "https://anse-sample1.pages.dev/korea-sentiment.html",
      "description": "한국 주식시장의 공포 탐욕 지수를 확인하고 투자에 참고하세요.",
      "datePublished": "2026-01-17",
      "author": {
        "@type": "Person",
        "name": "anse"
      }
    }
    </script>

<!-- Existing Firebase scripts -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script>
      const firebaseConfig = {
        apiKey: "AIzaSyBumYJj1X1KrjwjWTZhGuO0B-xZJj1fLsE",
        authDomain: "anse-sample1-46739525-2d1c0.firebaseapp.com",
        projectId: "anse-sample1-46739525-2d1c0",
        storageBucket: "anse-sample1-46739525-2d1c0.firebasestorage.app",
        messagingSenderId: "164266713411",
        appId: "1:164266713411:web:31e470b1a7320aa6028ff6"
      };
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const db = firebase.firestore();
    </script>
</head>
<body>
<!-- Top Navigation Bar -->
<header class="sticky top-0 z-50 w-full border-b border-solid border-[#e7ecf4] dark:border-[#1e293b] bg-white/80 dark:bg-background-dark/80 backdrop-blur-md">
<div class="mx-auto flex max-w-[1200px] items-center justify-between px-6 py-3">
<div class="flex items-center gap-8">
<div class="flex items-center gap-3">
<div class="flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-white">
<span class="material-symbols-outlined text-[20px]">leaderboard</span>
</div>
<h2 class="text-lg font-bold tracking-tight">KOSPI Fear &amp; Greed</h2>
</div>
<nav class="hidden md:flex items-center gap-6">
<a class="text-sm font-semibold text-primary" href="#">Dashboard</a>
<a class="text-sm font-medium text-[#49699c] dark:text-slate-400 hover:text-primary transition-colors" href="#">Market Analysis</a>
<a class="text-sm font-medium text-[#49699c] dark:text-slate-400 hover:text-primary transition-colors" href="#">Portfolio</a>
<a class="text-sm font-medium text-[#49699c] dark:text-slate-400 hover:text-primary transition-colors" href="#">Indices</a>
</nav>
</div>
<div class="flex items-center gap-4">
<div class="relative hidden sm:block">
<span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[#49699c] text-[20px]">search</span>
<input class="h-10 w-64 rounded-lg border-none bg-[#f0f3f9] dark:bg-slate-800 pl-10 text-sm focus:ring-2 focus:ring-primary" placeholder="Search markets..." type="text"/>
</div>
<button class="flex h-10 w-10 items-center justify-center rounded-lg bg-[#f0f3f9] dark:bg-slate-800 text-[#0d131c] dark:text-white">
<span class="material-symbols-outlined">notifications</span>
</button>
<div class="h-10 w-10 rounded-full bg-cover bg-center ring-2 ring-primary/20" data-alt="User profile avatar" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBneBh9BK99BKx2b26Ln0wWAXSWA-NkKD-lrrv98lVK_rJdPXTgQuGmdvqczD3UIKISPcMnzpf-BQOdedWBnyulZOQWc1ciJwX7DT6PMhaFrVawJq4F6y18XmDN29W32bH_6CzaUWabwqtdTvTlUIGfSvw74jtRHl327xyGMcu_5I55ABKEDpKDaOoVeIFo8NUFPEGK3dONKg3bls3I7AJT26lh-N-OCbGYRo4N6cdwNSvECRXQfW82pZjHea9vnYNYvU8yp9ZTwnIf')"></div>
</div>
</div>
</header>
<main class="mx-auto max-w-[1200px] px-6 py-8">
<!-- Page Heading -->
<div class="mb-8 flex flex-wrap items-end justify-between gap-4">
<div class="flex flex-col gap-1">
<h1 class="text-3xl font-black tracking-tight dark:text-white">Market Sentiment Index</h1>
<p class="text-base text-[#49699c] dark:text-slate-400">KOSPI fear and greed analysis based on market momentum and volatility.</p>
</div>
<div id="market-status-indicator" class="flex items-center gap-2 rounded-full bg-emerald-100 dark:bg-emerald-900/30 px-3 py-1 text-xs font-bold text-emerald-600 dark:text-emerald-400">
<span id="market-status-dot" class="h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
                <span id="market-status-text">MARKET OPEN</span>
            </div>
</div>
<div class="grid grid-cols-1 gap-8 lg:grid-cols-12">
<!-- Main Gauge Section -->
<div class="lg:col-span-8">
<div class="flex flex-col overflow-hidden rounded-xl border border-[#e7ecf4] dark:border-[#1e293b] bg-white dark:bg-[#161f2c] p-8 shadow-sm">
<div class="mb-4 flex items-center justify-between">
<h3 class="text-lg font-bold">Current Sentiment</h3>
<span id="last-updated-time" class="text-sm font-medium text-[#49699c]">Last updated: 14:30 KST</span>
</div>
<div class="relative flex flex-col items-center py-10">
<!-- Gauge visualization -->
<div class="relative h-48 w-80 overflow-hidden rounded-t-full bg-slate-100 dark:bg-slate-800">
<!-- Gauge segments colored with conic gradient simulated as a semicircular background -->
<div class="absolute inset-0 gauge-gradient opacity-80" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);"></div>
<div class="absolute bottom-0 left-1/2 h-32 w-64 -translate-x-1/2 rounded-t-full bg-white dark:bg-[#161f2c]"></div>
<!-- Needle -->
<div class="absolute bottom-0 left-1/2 h-40 w-1 -translate-x-1/2 origin-bottom transition-transform duration-1000 ease-out" id="gauge-needle" style="transform: translateX(-50%) rotate(54deg);">
<div class="h-full w-full bg-slate-900 dark:bg-white rounded-full"></div>
<div class="absolute -bottom-2 left-1/2 h-4 w-4 -translate-x-1/2 rounded-full bg-slate-900 dark:bg-white"></div>
</div>
</div>
<div class="mt-6 flex flex-col items-center gap-1">
<span id="score" class="text-5xl font-black text-primary">72</span>
<span id="status" class="text-2xl font-bold tracking-tight text-primary">GREED</span>
</div>
<div class="mt-10 flex w-full justify-between px-4">
<div class="flex flex-col items-center gap-1">
<span class="h-1.5 w-12 rounded-full bg-red-400"></span>
<span class="text-[10px] font-bold text-[#49699c] uppercase">Extreme Fear</span>
</div>
<div class="flex flex-col items-center gap-1">
<span class="h-1.5 w-12 rounded-full bg-yellow-400"></span>
<span class="text-[10px] font-bold text-[#49699c] uppercase">Neutral</span>
</div>
<div class="flex flex-col items-center gap-1">
<span class="h-1.5 w-12 rounded-full bg-primary"></span>
<span class="text-[10px] font-bold text-[#49699c] uppercase">Extreme Greed</span>
</div>
</div>
</div>
</div>
<!-- 30-Day Trend Chart -->
<div class="mt-8 flex flex-col overflow-hidden rounded-xl border border-[#e7ecf4] dark:border-[#1e293b] bg-white dark:bg-[#161f2c] p-6 shadow-sm">
<div class="mb-6 flex items-center justify-between">
<h3 class="text-lg font-bold">30-Day Index History</h3>
<div class="flex gap-2">
<button class="rounded-md bg-primary/10 px-3 py-1 text-xs font-bold text-primary">30D</button>
<button class="rounded-md px-3 py-1 text-xs font-bold text-[#49699c] hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">90D</button>
<button class="rounded-md px-3 py-1 text-xs font-bold text-[#49699c] hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">1Y</button>
</div>
</div>
<div class="h-64 w-full">
<svg class="h-full w-full" preserveaspectratio="none" viewbox="0 0 1000 200">
<!-- Area background -->
<path class="opacity-10" d="M0 160 Q 100 140, 200 150 T 400 120 T 600 80 T 800 100 T 1000 60 L 1000 200 L 0 200 Z" fill="url(#chartGradient)"></path>
<!-- Line -->
<path d="M0 160 Q 100 140, 200 150 T 400 120 T 600 80 T 800 100 T 1000 60" fill="none" stroke="#3d84f5" stroke-linecap="round" stroke-width="3"></path>
<defs>
<lineargradient id="chartGradient" x1="0" x2="0" y1="0" y2="1">
<stop offset="0%" stop-color="#3d84f5"></stop>
<stop offset="100%" stop-color="#3d84f5" stop-opacity="0"></stop>
</lineargradient>
</defs>
</svg>
<div class="mt-4 flex justify-between text-[11px] font-bold text-[#49699c]">
<span>30 DAYS AGO</span>
<span>20 DAYS AGO</span>
<span>10 DAYS AGO</span>
<span>TODAY</span>
</div>
</div>
</div>
</div>
<!-- Historical Comparisons & Side Metrics -->
<div class="lg:col-span-4 flex flex-col gap-6">
<!-- Comparison Cards -->
<div class="grid grid-cols-1 gap-4">
<div class="flex flex-col gap-4 rounded-xl border border-[#e7ecf4] dark:border-[#1e293b] bg-white dark:bg-[#161f2c] p-6 shadow-sm">
<h4 class="text-sm font-bold text-[#49699c] uppercase tracking-wider">Historical Context</h4>
<div class="flex items-center justify-between border-b border-[#f0f3f9] dark:border-slate-800 pb-4">
<div>
<p class="text-xs font-medium text-[#49699c]">Previous Close</p>
<p class="text-lg font-bold">68 <span class="text-sm font-normal text-[#49699c]">(Greed)</span></p>
</div>
<div class="flex items-center text-emerald-500">
<span class="material-symbols-outlined text-[20px]">trending_up</span>
<span class="text-sm font-bold ml-1">+4</span>
</div>
</div>
<div class="flex items-center justify-between border-b border-[#f0f3f9] dark:border-slate-800 pb-4">
<div>
<p class="text-xs font-medium text-[#49699c]">1 Week Ago</p>
<p class="text-lg font-bold">52 <span class="text-sm font-normal text-[#49699c]">(Neutral)</span></p>
</div>
<div class="flex items-center text-emerald-500">
<span class="material-symbols-outlined text-[20px]">trending_up</span>
<span class="text-sm font-bold ml-1">+20</span>
</div>
</div>
<div class="flex items-center justify-between">
<div>
<p class="text-xs font-medium text-[#49699c]">1 Month Ago</p>
<p class="text-lg font-bold">24 <span class="text-sm font-normal text-[#49699c]">(Fear)</span></p>
</div>
<div class="flex items-center text-emerald-500">
<span class="material-symbols-outlined text-[20px]">trending_up</span>
<span class="text-sm font-bold ml-1">+48</span>
</div>
</div>
</div>
<!-- Market Indicators section -->
<div class="rounded-xl border border-[#e7ecf4] dark:border-[#1e293b] bg-white dark:bg-[#161f2c] p-6 shadow-sm">
<h4 class="mb-4 text-sm font-bold text-[#49699c] uppercase tracking-wider">Market Indicators</h4>
<div id="indicator-details" class="space-y-4">
    <!-- Indicators will be injected here by JavaScript -->
    <p id="indicator-list" class="text-sm text-[#49699c] dark:text-slate-400"></p>
    <p id="indicator-avg" class="text-sm font-bold text-[#49699c] dark:text-slate-400"></p>
</div>
</div>
<!-- Market Indices Quick View -->
<div class="rounded-xl border border-[#e7ecf4] dark:border-[#1e293b] bg-primary text-white p-6 shadow-sm">
<div class="flex items-center justify-between mb-4">
<h4 class="text-sm font-bold uppercase tracking-wider">KOSPI 200</h4>
<span class="material-symbols-outlined">insights</span>
</div>
<div class="flex flex-col gap-1">
<p class="text-3xl font-black">2,654.32</p>
<div class="flex items-center gap-2">
<span class="text-sm font-bold bg-white/20 px-2 py-0.5 rounded">+1.24%</span>
<span class="text-sm text-white/80">▲ 32.50</span>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Footer / Data Source -->
<footer class="mt-12 border-t border-[#e7ecf4] dark:border-[#1e293b] pt-8 pb-12">
<div class="flex flex-wrap items-center justify-between gap-6 text-[#49699c] dark:text-slate-500">
<div class="flex flex-col gap-2">
<p class="text-sm font-medium">Data provided by KRX (Korea Exchange) and KOFIA.</p>
<p class="max-w-md text-xs leading-relaxed">The Fear &amp; Greed Index is a way to gauge stock market movements and whether stocks are fairly priced. The theory is based on the logic that excessive fear tends to drive down share prices, and too much greed tends to have the opposite effect.</p>
</div>
<div class="flex gap-4">
<button class="flex items-center gap-2 rounded-lg bg-[#e7ecf4] dark:bg-slate-800 px-4 py-2 text-sm font-bold text-[#0d131c] dark:text-white hover:opacity-80">
<span class="material-symbols-outlined text-[18px]">help_outline</span>
                        How it's calculated
                    </button>
<button class="flex items-center gap-2 rounded-lg bg-[#e7ecf4] dark:bg-slate-800 px-4 py-2 text-sm font-bold text-[#0d131c] dark:text-white hover:opacity-80">
<span class="material-symbols-outlined text-[18px]">download</span>
                        Export Data
                    </button>
</div>
</div>
</footer>
</main>
    <script>
      // Firebase initialization (from old head)
      const firebaseConfig = {
        apiKey: "AIzaSyBumYJj1X1KrjwjWTZhGuO0B-xZJj1fLsE",
        authDomain: "anse-sample1-46739525-2d1c0.firebaseapp.com",
        projectId: "anse-sample1-46739525-2d1c0",
        storageBucket: "anse-sample1-46739525-2d1c0.firebasestorage.app",
        messagingSenderId: "164266713411",
        appId: "1:164266713411:web:31e470b1a7320aa6028ff6"
      };
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const db = firebase.firestore();

        // Define indicator names
        const indicatorNames = {
            1: "시장의 모멘텀",
            2: "주가 강도",
            3: "시장의 폭",
            4: "시장 변동성",
            5: "옵션 풋콜 비율"
        };

        // Function to update gauge needle rotation and sentiment text/color
        function updateGauge(score) {
            const needle = document.getElementById('gauge-needle');
            const sentimentText = document.getElementById('status');
            const scoreDisplay = document.getElementById('score');

            // Map score 0-100 to rotation 0-180 degrees
            // Gauge is semi-circular, from left to right (0 to 180 degrees)
            const rotationDegree = score * 1.8; // 180 / 100 = 1.8
            needle.style.transform = `translateX(-50%) rotate(${rotationDegree}deg)`;

            // Update sentiment text and color
            let statusMessage = "";
            let textColorClass = "";

            if (score <= 25) {
                statusMessage = "EXTREME FEAR"; textColorClass = "text-red-500";
            } else if (score <= 45) {
                statusMessage = "FEAR"; textColorClass = "text-orange-500";
            } else if (score <= 55) {
                statusMessage = "NEUTRAL"; textColorClass = "text-yellow-500";
            } else if (score <= 75) {
                statusMessage = "GREED"; textColorClass = "text-emerald-500";
            } else {
                statusMessage = "EXTREME GREED"; textColorClass = "text-blue-500"; // Changed from 'text-primary' to an explicit Tailwind class for better dark mode compatibility. Primary is usually blue-500
            }
            
            sentimentText.textContent = statusMessage;
            scoreDisplay.textContent = score;

            // Remove previous color classes and add new one
            sentimentText.className = sentimentText.className.split(' ').filter(c => !c.startsWith('text-')).join(' ');
            sentimentText.classList.add(textColorClass);
            scoreDisplay.className = scoreDisplay.className.split(' ').filter(c => !c.startsWith('text-')).join(' ');
            scoreDisplay.classList.add(textColorClass); // Apply color to score as well
        }

        async function fetchLatestIndex() {
            const scoreEl = document.getElementById('score');
            const statusEl = document.getElementById('status');
            const lastUpdatedTimeEl = document.getElementById('last-updated-time');
            const indicatorDetailsEl = document.getElementById('indicator-details'); // New ID
            const indicatorListEl = document.getElementById('indicator-list'); // New ID
            const indicatorAvgEl = document.getElementById('indicator-avg'); // New ID
            
            try {
                // For loader, assuming a basic text message for now as code.html doesn't have a direct loader element
                statusEl.textContent = "데이터를 불러오는 중..."; 
                statusEl.style.display = 'block'; // Show status text for loading

                const q = db.collection("korea_index").orderBy("timestamp", "desc").limit(1);
                const querySnapshot = await q.get();

                if (!querySnapshot.empty) {
                    const doc = querySnapshot.docs[0].data();
                    const score = doc.score;
                    const timestamp = doc.timestamp.toDate(); // Convert Firestore Timestamp to JavaScript Date
                    const formattedTime = timestamp.toLocaleString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' });
                    
                    // Update main score, sentiment, and gauge
                    updateGauge(score);
                    lastUpdatedTimeEl.textContent = `Last updated: ${formattedTime}`; // Use template literal

                    const indicators = [];
                    for (let i = 1; i <= 5; i++) {
                        const indicatorKey = `indicator${i}`;
                        if (doc[indicatorKey] !== undefined) {
                            indicators.push({
                                id: i,
                                name: indicatorNames[i],
                                value: doc[indicatorKey]
                            });
                        }
                    }

                    if (indicators.length > 0) {
                        const indicatorTexts = indicators.map(item => {
                            if (item.id === 5 && item.value === 50) {
                                return `지표 ${item.id}(${item.name}) : 준비중`;
                            } else if (item.value === 50) {
                                return `지표 ${item.id}(${item.name}) : 50 (수집 준비중, 현재는 평균값)`;
                            } else {
                                return `지표 ${item.id}(${item.name}) : ${item.value.toFixed(2)}`;
                            }
                        });
                        indicatorListEl.innerHTML = indicatorTexts.join('<br>');

                        const avg = indicators.reduce((a, b) => a + b.value, 0) / indicators.length;
                        indicatorAvgEl.textContent = `${indicators.length}개 지표 평균: ${avg.toFixed(2)}`;

                        indicatorDetailsEl.style.display = 'block';
                    } else {
                        indicatorDetailsEl.style.display = 'none'; // Hide if no indicators
                    }

                } else {
                    statusEl.textContent = "업데이트된 데이터가 없습니다.";
                    if (indicatorDetailsEl) indicatorDetailsEl.style.display = 'none';
                }
            } catch (error) {
                console.error("Firebase 오류: ", error);
                statusEl.textContent = "연결 오류가 발생했습니다.";
                if (indicatorDetailsEl) indicatorDetailsEl.style.display = 'none';
            } finally {
                // scoreEl.style.display = 'block'; // Always visible in new design
                // statusEl.style.display = 'block'; // Always visible in new design
                lastUpdatedTimeEl.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchLatestIndex(); // Call on page load
            updateMarketStatus(); // Initial status update
            setInterval(updateMarketStatus, 60000); // Update every minute
        });
    </script>
    <script>
        // Function to update market open/close status
        function updateMarketStatus() {
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000); // UTC time
            const kstOffset = 9 * 3600000; // KST is UTC+9
            const kstDate = new Date(utc + kstOffset);

            const dayOfWeek = kstDate.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
            const hours = kstDate.getHours();
            const minutes = kstDate.getMinutes();

            const isWeekday = (dayOfWeek >= 1 && dayOfWeek <= 5); // Monday to Friday
            // Market open: 09:00 to 15:30 KST
            const isOpenHours = (hours > 9 || (hours === 9 && minutes >= 0)) && (hours < 15 || (hours === 15 && minutes <= 30));

            const marketStatusTextEl = document.getElementById('market-status-text');
            const marketStatusDotEl = document.getElementById('market-status-dot');
            const marketStatusIndicatorEl = document.getElementById('market-status-indicator');

            if (isWeekday && isOpenHours) {
                marketStatusTextEl.textContent = "MARKET OPEN";
                marketStatusIndicatorEl.className = "flex items-center gap-2 rounded-full bg-emerald-100 dark:bg-emerald-900/30 px-3 py-1 text-xs font-bold text-emerald-600 dark:text-emerald-400";
                marketStatusDotEl.className = "h-2 w-2 rounded-full bg-emerald-500 animate-pulse";
            } else {
                marketStatusTextEl.textContent = "MARKET CLOSE";
                marketStatusIndicatorEl.className = "flex items-center gap-2 rounded-full bg-red-100 dark:bg-red-900/30 px-3 py-1 text-xs font-bold text-red-600 dark:text-red-400";
                marketStatusDotEl.className = "h-2 w-2 rounded-full bg-red-500"; // No pulse when closed
            }
        }
    </script>
    </script>
</body>